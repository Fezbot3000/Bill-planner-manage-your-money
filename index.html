<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Finance Tracker</title>
    
    <!-- Favicon -->
    <link rel="icon" href="./icons/icon-72x72.png">
    
    <!-- Material Components Web -->
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- iOS Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Finance Tracker">
    
    <!-- iOS icons -->
    <link rel="apple-touch-icon" href="./icons/icon-72x72.png" sizes="72x72">
    <link rel="apple-touch-icon" href="./icons/icon-152x152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="./icons/icon-512x512.png" sizes="512x512">
    
    <!-- Custom CSS will still be needed for some layout adjustments -->
    <link rel="stylesheet" href="./material-styles.css">
</head>
<body class="mdc-typography">
    <div class="app-container mdc-layout-grid">
        <!-- App Header -->
        <header class="mdc-top-app-bar mdc-top-app-bar--fixed">
            <div class="mdc-top-app-bar__row">
                <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
                    <span class="mdc-top-app-bar__title">Finance Tracker</span>
                </section>
                <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end">
                    <button id="theme-toggle-btn" class="mdc-button mdc-button--outlined">
                        <span class="mdc-button__ripple"></span>
                        <i class="material-icons mdc-button__icon" aria-hidden="true">dark_mode</i>
                        <span class="mdc-button__label">Dark Mode</span>
                    </button>
                    <button id="export-all-btn" class="mdc-button mdc-button--outlined">
                        <span class="mdc-button__ripple"></span>
                        <i class="material-icons mdc-button__icon" aria-hidden="true">upload</i>
                        <span class="mdc-button__label">Export All</span>
                    </button>
                    <button id="import-all-btn" class="mdc-button mdc-button--outlined">
                        <span class="mdc-button__ripple"></span>
                        <i class="material-icons mdc-button__icon" aria-hidden="true">download</i>
                        <span class="mdc-button__label">Import All</span>
                    </button>
                    <input type="file" id="import-file" accept=".json" style="display: none;">
                </section>
            </div>
            
            <!-- Mobile Tab Navigation -->
            <div class="mdc-tab-bar" role="tablist">
                <div class="mdc-tab-scroller">
                    <div class="mdc-tab-scroller__scroll-area">
                        <div class="mdc-tab-scroller__scroll-content">
                            <button id="interest-free-tab" class="mdc-tab mdc-tab--active" role="tab" aria-selected="true" tabindex="0">
                                <span class="mdc-tab__content">
                                    <span class="mdc-tab__text-label">Interest-Free Tracker</span>
                                </span>
                                <span class="mdc-tab-indicator mdc-tab-indicator--active">
                                    <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                                </span>
                                <span class="mdc-tab__ripple"></span>
                            </button>
                            <button id="bill-planner-tab" class="mdc-tab" role="tab" aria-selected="false" tabindex="-1">
                                <span class="mdc-tab__content">
                                    <span class="mdc-tab__text-label">Bill Planner</span>
                                </span>
                                <span class="mdc-tab-indicator">
                                    <span class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>
                                </span>
                                <span class="mdc-tab__ripple"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content Container - Adjusted for the top app bar spacing -->
        <div class="main-content mdc-top-app-bar--fixed-adjust">
            <div class="dual-panel-container">
                <!-- Interest-Free Tracker Panel -->
                <div class="panel" id="interest-free-panel">
                    <div class="panel-content">
                        <div class="mdc-card new-period-controls">
                            <div class="mdc-card__content">
                                <div class="form-row">
                                    <div class="mdc-text-field mdc-text-field--filled">
                                        <span class="mdc-text-field__ripple"></span>
                                        <span class="mdc-floating-label" id="start-date-label">Start Date</span>
                                        <input type="date" id="start-date" class="mdc-text-field__input" aria-labelledby="start-date-label">
                                        <span class="mdc-line-ripple"></span>
                                    </div>
                                    
                                    <div class="mdc-text-field mdc-text-field--filled">
                                        <span class="mdc-text-field__ripple"></span>
                                        <span class="mdc-floating-label" id="end-date-label">End Date</span>
                                        <input type="date" id="end-date" class="mdc-text-field__input" aria-labelledby="end-date-label">
                                        <span class="mdc-line-ripple"></span>
                                    </div>
                                    
                                    <div class="mdc-text-field mdc-text-field--filled">
                                        <span class="mdc-text-field__ripple"></span>
                                        <span class="mdc-floating-label" id="interest-free-days-label">Interest-Free Days</span>
                                        <input type="number" id="interest-free-days" class="mdc-text-field__input" value="55" min="1" max="365" aria-labelledby="interest-free-days-label">
                                        <span class="mdc-line-ripple"></span>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button id="add-period-btn" class="mdc-button mdc-button--raised">
                                        <span class="mdc-button__ripple"></span>
                                        <span class="mdc-button__label">Add Default Billing Period</span>
                                    </button>
                                    <button id="create-custom-period-btn" class="mdc-button mdc-button--raised">
                                        <span class="mdc-button__ripple"></span>
                                        <span class="mdc-button__label">Create Custom Period</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div id="billing-periods" class="billing-periods-container">
                            <!-- Billing periods will be added here dynamically -->
                            <!-- Sample period card structure below -->
                            <div class="mdc-card billing-period" style="display: none;">
                                <div class="mdc-card__content">
                                    <div class="mdc-card__header">
                                        <h2 class="mdc-typography--headline6">Billing Period 1
                                            <span class="mdc-typography--subtitle2">10th Jan 2023 to 9th Feb 2023</span>
                                        </h2>
                                        <div class="period-buttons">
                                            <button class="mdc-icon-button edit-period-btn" aria-label="Edit period">
                                                <i class="material-icons">edit</i>
                                            </button>
                                            <button class="mdc-icon-button delete-period-btn" aria-label="Delete period">
                                                <i class="material-icons">delete</i>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="period-info mdc-elevation--z1">
                                        <p class="mdc-typography--body2">Interest-free until: 6th Mar 2023 (55 days)</p>
                                    </div>
                                    
                                    <div class="period-details mdc-elevation--z1">
                                        <div class="detail-item">
                                            <span class="detail-label mdc-typography--caption">Days Remaining</span>
                                            <span class="detail-value mdc-typography--headline5">45</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label mdc-typography--caption">Interest-Free Period</span>
                                            <span class="detail-value mdc-typography--headline5">55 days</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label mdc-typography--caption">Total Owing</span>
                                            <span class="detail-value mdc-typography--headline5">$1,250.00</span>
                                        </div>
                                        <div class="detail-item">
                                            <span class="detail-label mdc-typography--caption">Status</span>
                                            <span class="detail-value mdc-typography--headline5">Active</span>
                                        </div>
                                    </div>
                                    
                                    <div class="period-actions">
                                        <button class="mdc-button mdc-button--raised add-transaction-btn">
                                            <span class="mdc-button__ripple"></span>
                                            <span class="mdc-button__label">Add Transaction</span>
                                        </button>
                                        <button class="mdc-button mdc-button--raised add-repayment-btn">
                                            <span class="mdc-button__ripple"></span>
                                            <span class="mdc-button__label">Add Repayment</span>
                                        </button>
                                    </div>
                                    
                                    <div class="mdc-data-table">
                                        <div class="mdc-data-table__table-container">
                                            <table class="mdc-data-table__table transactions-table">
                                                <thead>
                                                    <tr class="mdc-data-table__header-row">
                                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">DATE</th>
                                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">DESCRIPTION</th>
                                                        <th class="mdc-data-table__header-cell mdc-data-table__header-cell--numeric" role="columnheader" scope="col">AMOUNT</th>
                                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col"></th>
                                                    </tr>
                                                </thead>
                                                <tbody class="mdc-data-table__content transactions-body">
                                                    <!-- Transactions will be added here dynamically -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bill Planner Panel -->
                <div id="bill-planner-panel" class="panel">
                    <div class="panel-content">
                        <!-- Financial Overview Section -->
                        <div class="mdc-card financial-overview">
                            <div class="mdc-card__content">
                                <h2 class="mdc-typography--headline6">Financial Overview</h2>
                                <div id="financial-chart-container">
                                    <canvas id="financial-chart"></canvas>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Forms Section - Side by Side -->
                        <div class="bill-planner-forms mdc-layout-grid">
                            <div class="mdc-layout-grid__inner">
                                <!-- Pay Cycle Form -->
                                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone">
                                    <div class="mdc-card form-section">
                                        <div class="mdc-card__content">
                                            <h2 class="mdc-typography--headline6">Set Pay Cycle</h2>
                                            
                                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                                <span class="mdc-text-field__ripple"></span>
                                                <span class="mdc-floating-label" id="payCycleStart-label">Start Date</span>
                                                <input type="date" id="payCycleStart" class="mdc-text-field__input" aria-labelledby="payCycleStart-label">
                                                <span class="mdc-line-ripple"></span>
                                            </div>
                                            
                                            <div class="mdc-select mdc-select--filled form-field">
                                                <div class="mdc-select__anchor">
                                                    <span class="mdc-select__ripple"></span>
                                                    <span class="mdc-floating-label" id="payCycleFrequency-label">Frequency</span>
                                                    <span class="mdc-select__selected-text-container">
                                                        <span class="mdc-select__selected-text"></span>
                                                    </span>
                                                    <span class="mdc-select__dropdown-icon">
                                                        <svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5">
                                                            <polygon class="mdc-select__dropdown-icon-inactive" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"></polygon>
                                                            <polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"></polygon>
                                                        </svg>
                                                    </span>
                                                    <span class="mdc-line-ripple"></span>
                                                </div>
                                                <div class="mdc-select__menu mdc-menu mdc-menu-surface mdc-menu-surface--fullwidth">
                                                    <ul class="mdc-list" role="listbox" aria-label="Frequency options">
                                                        <li class="mdc-list-item mdc-list-item--selected" data-value="Fortnightly" aria-selected="true" role="option">
                                                            <span class="mdc-list-item__ripple"></span>
                                                            <span class="mdc-list-item__text">Fortnightly</span>
                                                        </li>
                                                        <li class="mdc-list-item" data-value="Monthly" role="option">
                                                            <span class="mdc-list-item__ripple"></span>
                                                            <span class="mdc-list-item__text">Monthly</span>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            
                                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                                <span class="mdc-text-field__ripple"></span>
                                                <span class="mdc-text-field__affix--prefix">$</span>
                                                <span class="mdc-floating-label" id="payCycleIncome-label">Income per Pay Cycle</span>
                                                <input type="number" id="payCycleIncome" class="mdc-text-field__input" step="0.01" aria-labelledby="payCycleIncome-label">
                                                <span class="mdc-line-ripple"></span>
                                            </div>
                                            
                                            <button onclick="setPayCycle()" class="mdc-button mdc-button--raised form-button">
                                                <span class="mdc-button__ripple"></span>
                                                <span class="mdc-button__label">Set Pay Cycle</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Add Bill Form -->
                                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--span-8-tablet mdc-layout-grid__cell--span-4-phone">
                                    <div class="mdc-card form-section">
                                        <div class="mdc-card__content">
                                            <h2 class="mdc-typography--headline6">Add a New Bill</h2>
                                            
                                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                                <span class="mdc-text-field__ripple"></span>
                                                <span class="mdc-floating-label" id="billName-label">Name</span>
                                                <input type="text" id="billName" class="mdc-text-field__input" aria-labelledby="billName-label">
                                                <span class="mdc-line-ripple"></span>
                                            </div>
                                            
                                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                                <span class="mdc-text-field__ripple"></span>
                                                <span class="mdc-text-field__affix--prefix">$</span>
                                                <span class="mdc-floating-label" id="billAmount-label">Amount</span>
                                                <input type="number" id="billAmount" class="mdc-text-field__input" step="0.01" aria-labelledby="billAmount-label">
                                                <span class="mdc-line-ripple"></span>
                                            </div>
                                            
                                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                                <span class="mdc-text-field__ripple"></span>
                                                <span class="mdc-floating-label" id="billDate-label">Date</span>
                                                <input type="date" id="billDate" class="mdc-text-field__input" aria-labelledby="billDate-label">
                                                <span class="mdc-line-ripple"></span>
                                            </div>
                                            
                                            <div class="mdc-select mdc-select--filled form-field">
                                                <div class="mdc-select__anchor">
                                                    <span class="mdc-select__ripple"></span>
                                                    <span class="mdc-floating-label" id="billFrequency-label">Frequency</span>
                                                    <span class="mdc-select__selected-text-container">
                                                        <span class="mdc-select__selected-text"></span>
                                                    </span>
                                                    <span class="mdc-select__dropdown-icon">
                                                        <svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5">
                                                            <polygon class="mdc-select__dropdown-icon-inactive" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"></polygon>
                                                            <polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"></polygon>
                                                        </svg>
                                                    </span>
                                                    <span class="mdc-line-ripple"></span>
                                                </div>
                                                <div class="mdc-select__menu mdc-menu mdc-menu-surface mdc-menu-surface--fullwidth">
                                                    <ul class="mdc-list" role="listbox" aria-label="Frequency options">
                                                        <li class="mdc-list-item mdc-list-item--selected" data-value="Monthly" aria-selected="true" role="option">
                                                            <span class="mdc-list-item__ripple"></span>
                                                            <span class="mdc-list-item__text">Monthly</span>
                                                        </li>
                                                        <li class="mdc-list-item" data-value="Fortnightly" role="option">
                                                            <span class="mdc-list-item__ripple"></span>
                                                            <span class="mdc-list-item__text">Fortnightly</span>
                                                        </li>
                                                        <li class="mdc-list-item" data-value="Yearly" role="option">
                                                            <span class="mdc-list-item__ripple"></span>
                                                            <span class="mdc-list-item__text">Yearly</span>
                                                        </li>
                                                        <li class="mdc-list-item" data-value="6-Monthly" role="option">
                                                            <span class="mdc-list-item__ripple"></span>
                                                            <span class="mdc-list-item__text">6-Monthly</span>
                                                        </li>
                                                        <li class="mdc-list-item" data-value="One-Off" role="option">
                                                            <span class="mdc-list-item__ripple"></span>
                                                            <span class="mdc-list-item__text">One-Off</span>
                                                        </li>
                                                        <li class="mdc-list-item" data-value="Custom" role="option">
                                                            <span class="mdc-list-item__ripple"></span>
                                                            <span class="mdc-list-item__text">Custom</span>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            
                                            <div class="mdc-select mdc-select--filled form-field">
                                                <div class="mdc-select__anchor">
                                                    <span class="mdc-select__ripple"></span>
                                                    <span class="mdc-floating-label" id="billGroup-label">Group</span>
                                                    <span class="mdc-select__selected-text-container">
                                                        <span class="mdc-select__selected-text"></span>
                                                    </span>
                                                    <span class="mdc-select__dropdown-icon">
                                                        <svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5">
                                                            <polygon class="mdc-select__dropdown-icon-inactive" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"></polygon>
                                                            <polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"></polygon>
                                                        </svg>
                                                    </span>
                                                    <span class="mdc-line-ripple"></span>
                                                </div>
                                                <div class="mdc-select__menu mdc-menu mdc-menu-surface mdc-menu-surface--fullwidth">
                                                    <ul class="mdc-list" role="listbox" aria-label="Group options">
                                                        <li class="mdc-list-item mdc-list-item--selected" data-value="Group 1 - 2Up" aria-selected="true" role="option">
                                                            <span class="mdc-list-item__ripple"></span>
                                                            <span class="mdc-list-item__text">Group 1 - 2Up</span>
                                                        </li>
                                                        <li class="mdc-list-item" data-value="Group 2 - Utilities" role="option">
                                                            <span class="mdc-list-item__ripple"></span>
                                                            <span class="mdc-list-item__text">Group 2 - Utilities</span>
                                                        </li>
                                                        <li class="mdc-list-item" data-value="Group 3 - Subscriptions" role="option">
                                                            <span class="mdc-list-item__ripple"></span>
                                                            <span class="mdc-list-item__text">Group 3 - Subscriptions</span>
                                                        </li>
                                                        <li class="mdc-list-item" data-value="Group 4 - Other" role="option">
                                                            <span class="mdc-list-item__ripple"></span>
                                                            <span class="mdc-list-item__text">Group 4 - Other</span>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            
                                            <button onclick="addBill()" class="mdc-button mdc-button--raised form-button add-bill-btn">
                                                <span class="mdc-button__ripple"></span>
                                                <i class="material-icons mdc-button__icon" aria-hidden="true">add</i>
                                                <span class="mdc-button__label">Add Bill</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Master Bill List Section -->
                        <div class="master-bill-section">
                            <div class="section-header master-bill-header">
                                <h2 class="mdc-typography--headline6">Master Bill List</h2>
                                <button id="toggleMasterList" class="mdc-button">
                                    <span class="mdc-button__ripple"></span>
                                    <i class="material-icons mdc-button__icon" aria-hidden="true">visibility_off</i>
                                    <span class="mdc-button__label">Hide List</span>
                                </button>
                            </div>
                            <div id="masterListContainer" class="mdc-elevation--z1">
                                <ul id="masterList" class="mdc-list mdc-list--two-line">
                                    <!-- Bill list items will be dynamically added here -->
                                </ul>
                            </div>
                        </div>
                        
                        <!-- Pay Cycles Section -->
                        <div class="pay-cycles-section">
                            <div class="section-header pay-cycles-header">
                                <h2 class="mdc-typography--headline6">Pay Cycles</h2>
                                <button id="toggleAllCycles" class="mdc-button">
                                    <span class="mdc-button__ripple"></span>
                                    <i class="material-icons mdc-button__icon" aria-hidden="true">expand_less</i>
                                    <span class="mdc-button__label">Collapse All</span>
                                </button>
                            </div>
                            <div id="payCycles" class="pay-cycles-container mdc-elevation--z1">
                                <!-- Pay cycles will be dynamically added here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <!-- Transaction Modal -->
        <div id="transaction-modal" class="mdc-dialog">
            <div class="mdc-dialog__container">
                <div class="mdc-dialog__surface" role="dialog" aria-modal="true" aria-labelledby="transaction-dialog-title">
                    <h2 class="mdc-dialog__title" id="transaction-dialog-title">Add Transaction</h2>
                    <div class="mdc-dialog__content">
                        <form id="transaction-form">
                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                <span class="mdc-text-field__ripple"></span>
                                <span class="mdc-floating-label" id="transaction-date-label">Date</span>
                                <input type="date" id="transaction-date" class="mdc-text-field__input" required aria-labelledby="transaction-date-label">
                                <span class="mdc-line-ripple"></span>
                            </div>
                            
                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                <span class="mdc-text-field__ripple"></span>
                                <span class="mdc-text-field__affix--prefix">$</span>
                                <span class="mdc-floating-label" id="transaction-amount-label">Amount</span>
                                <input type="number" step="0.01" id="transaction-amount" class="mdc-text-field__input" required aria-labelledby="transaction-amount-label">
                                <span class="mdc-line-ripple"></span>
                            </div>
                            
                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                <span class="mdc-text-field__ripple"></span>
                                <span class="mdc-floating-label" id="transaction-description-label">Description</span>
                                <input type="text" id="transaction-description" class="mdc-text-field__input" placeholder="Optional" aria-labelledby="transaction-description-label">
                                <span class="mdc-line-ripple"></span>
                            </div>
                        </form>
                    </div>
                    <div class="mdc-dialog__actions">
                        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
                            <span class="mdc-button__ripple"></span>
                            <span class="mdc-button__label">Cancel</span>
                        </button>
                        <button type="submit" form="transaction-form" class="mdc-button mdc-button--raised mdc-dialog__button">
                            <span class="mdc-button__ripple"></span>
                            <span class="mdc-button__label">Add Transaction</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="mdc-dialog__scrim"></div>
        </div>

        <!-- Payment Modal -->
        <div id="payment-modal" class="mdc-dialog">
            <div class="mdc-dialog__container">
                <div class="mdc-dialog__surface" role="dialog" aria-modal="true" aria-labelledby="payment-dialog-title">
                    <h2 class="mdc-dialog__title" id="payment-dialog-title">Add Payment</h2>
                    <div class="mdc-dialog__content">
                        <form id="payment-form">
                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                <span class="mdc-text-field__ripple"></span>
                                <span class="mdc-floating-label" id="payment-date-label">Date</span>
                                <input type="date" id="payment-date" class="mdc-text-field__input" required aria-labelledby="payment-date-label">
                                <span class="mdc-line-ripple"></span>
                            </div>
                            
                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                <span class="mdc-text-field__ripple"></span>
                                <span class="mdc-text-field__affix--prefix">$</span>
                                <span class="mdc-floating-label" id="payment-amount-label">Amount</span>
                                <input type="number" step="0.01" id="payment-amount" class="mdc-text-field__input" required aria-labelledby="payment-amount-label">
                                <span class="mdc-line-ripple"></span>
                            </div>
                            
                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                <span class="mdc-text-field__ripple"></span>
                                <span class="mdc-floating-label" id="payment-description-label">Description</span>
                                <input type="text" id="payment-description" class="mdc-text-field__input" placeholder="Optional" aria-labelledby="payment-description-label">
                                <span class="mdc-line-ripple"></span>
                            </div>
                        </form>
                    </div>
                    <div class="mdc-dialog__actions">
                        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
                            <span class="mdc-button__ripple"></span>
                            <span class="mdc-button__label">Cancel</span>
                        </button>
                        <button type="submit" form="payment-form" class="mdc-button mdc-button--raised mdc-dialog__button">
                            <span class="mdc-button__ripple"></span>
                            <span class="mdc-button__label">Add Payment</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="mdc-dialog__scrim"></div>
        </div>

        <!-- Edit Period Modal -->
        <div id="edit-period-modal" class="mdc-dialog">
            <div class="mdc-dialog__container">
                <div class="mdc-dialog__surface" role="dialog" aria-modal="true" aria-labelledby="edit-period-dialog-title">
                    <h2 class="mdc-dialog__title" id="edit-period-dialog-title">Edit Billing Period</h2>
                    <div class="mdc-dialog__content">
                        <form id="edit-period-form">
                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                <span class="mdc-text-field__ripple"></span>
                                <span class="mdc-floating-label" id="edit-start-date-label">Start Date</span>
                                <input type="date" id="edit-start-date" class="mdc-text-field__input" required aria-labelledby="edit-start-date-label">
                                <span class="mdc-line-ripple"></span>
                            </div>
                            
                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                <span class="mdc-text-field__ripple"></span>
                                <span class="mdc-floating-label" id="edit-end-date-label">End Date</span>
                                <input type="date" id="edit-end-date" class="mdc-text-field__input" required aria-labelledby="edit-end-date-label">
                                <span class="mdc-line-ripple"></span>
                            </div>
                            
                            <div class="mdc-text-field mdc-text-field--filled form-field">
                                <span class="mdc-text-field__ripple"></span>
                                <span class="mdc-floating-label" id="edit-interest-free-days-label">Interest-Free Days</span>
                                <input type="number" id="edit-interest-free-days" class="mdc-text-field__input" min="1" max="365" required aria-labelledby="edit-interest-free-days-label">
                                <span class="mdc-line-ripple"></span>
                            </div>
                        </form>
                    </div>
                    <div class="mdc-dialog__actions">
                        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
                            <span class="mdc-button__ripple"></span>
                            <span class="mdc-button__label">Cancel</span>
                        </button>
                        <button type="submit" form="edit-period-form" class="mdc-button mdc-button--raised mdc-dialog__button">
                            <span class="mdc-button__ripple"></span>
                            <span class="mdc-button__label">Save Changes</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="mdc-dialog__scrim"></div>
        </div>

        <!-- Custom Frequency Modal -->
        <div id="customFrequencyModal" class="mdc-dialog">
            <div class="mdc-dialog__container">
                <div class="mdc-dialog__surface" role="dialog" aria-modal="true" aria-labelledby="custom-frequency-dialog-title">
                    <h2 class="mdc-dialog__title" id="custom-frequency-dialog-title">Custom Frequency</h2>
                    <div class="mdc-dialog__content">
                        <div class="frequency-option">
                            <label class="mdc-typography--body1">Repeat every:</label>
                            <div class="frequency-inputs">
                                <div class="mdc-text-field mdc-text-field--filled">
                                    <span class="mdc-text-field__ripple"></span>
                                    <input type="number" id="customFrequencyValue" class="mdc-text-field__input" min="1" value="1">
                                    <span class="mdc-line-ripple"></span>
                                </div>
                                
                                <div class="mdc-select mdc-select--filled">
                                    <div class="mdc-select__anchor">
                                        <span class="mdc-select__ripple"></span>
                                        <span class="mdc-select__selected-text-container">
                                            <span class="mdc-select__selected-text">Day(s)</span>
                                        </span>
                                        <span class="mdc-select__dropdown-icon">
                                            <svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5">
                                                <polygon class="mdc-select__dropdown-icon-inactive" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"></polygon>
                                                <polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"></polygon>
                                            </svg>
                                        </span>
                                        <span class="mdc-line-ripple"></span>
                                    </div>
                                    <div class="mdc-select__menu mdc-menu mdc-menu-surface mdc-menu-surface--fullwidth">
                                        <ul class="mdc-list" role="listbox">
                                            <li class="mdc-list-item mdc-list-item--selected" data-value="days" aria-selected="true" role="option">
                                                <span class="mdc-list-item__ripple"></span>
                                                <span class="mdc-list-item__text">Day(s)</span>
                                            </li>
                                            <li class="mdc-list-item" data-value="weeks" role="option">
                                                <span class="mdc-list-item__ripple"></span>
                                                <span class="mdc-list-item__text">Week(s)</span>
                                            </li>
                                            <li class="mdc-list-item" data-value="months" role="option">
                                                <span class="mdc-list-item__ripple"></span>
                                                <span class="mdc-list-item__text">Month(s)</span>
                                            </li>
                                            <li class="mdc-list-item" data-value="years" role="option">
                                                <span class="mdc-list-item__ripple"></span>
                                                <span class="mdc-list-item__text">Year(s)</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="frequency-option" id="weekdaySelector" style="display:none;">
                            <label class="mdc-typography--body1">On:</label>
                            <div class="weekday-buttons">
                                <button type="button" class="mdc-icon-button weekday-btn" data-day="0">
                                    <span class="mdc-icon-button__ripple"></span>
                                    <span class="mdc-icon-button__focus-ring"></span>
                                    Su
                                </button>
                                <button type="button" class="mdc-icon-button weekday-btn" data-day="1">
                                    <span class="mdc-icon-button__ripple"></span>
                                    <span class="mdc-icon-button__focus-ring"></span>
                                    Mo
                                </button>
                                <button type="button" class="mdc-icon-button weekday-btn" data-day="2">
                                    <span class="mdc-icon-button__ripple"></span>
                                    <span class="mdc-icon-button__focus-ring"></span>
                                    Tu
                                </button>
                                <button type="button" class="mdc-icon-button weekday-btn" data-day="3">
                                    <span class="mdc-icon-button__ripple"></span>
                                    <span class="mdc-icon-button__focus-ring"></span>
                                    We
                                </button>
                                <button type="button" class="mdc-icon-button weekday-btn" data-day="4">
                                    <span class="mdc-icon-button__ripple"></span>
                                    <span class="mdc-icon-button__focus-ring"></span>
                                    Th
                                </button>
                                <button type="button" class="mdc-icon-button weekday-btn" data-day="5">
                                    <span class="mdc-icon-button__ripple"></span>
                                    <span class="mdc-icon-button__focus-ring"></span>
                                    Fr
                                </button>
                                <button type="button" class="mdc-icon-button weekday-btn" data-day="6">
                                    <span class="mdc-icon-button__ripple"></span>
                                    <span class="mdc-icon-button__focus-ring"></span>
                                    Sa
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="mdc-dialog__actions">
                        <button type="button" id="cancelCustomFrequency" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
                            <span class="mdc-button__ripple"></span>
                            <span class="mdc-button__label">Cancel</span>
                        </button>
                        <button type="button" id="saveCustomFrequency" class="mdc-button mdc-button--raised mdc-dialog__button">
                            <span class="mdc-button__ripple"></span>
                            <span class="mdc-button__label">Save</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="mdc-dialog__scrim"></div>
        </div>

        <!-- Import/Export Modals -->
        <div id="import-modal" class="mdc-dialog">
            <div class="mdc-dialog__container">
                <div class="mdc-dialog__surface" role="dialog" aria-modal="true" aria-labelledby="import-dialog-title">
                    <h2 class="mdc-dialog__title" id="import-dialog-title">Import Data</h2>
                    <div class="mdc-dialog__content">
                        <p class="mdc-typography--body1">Choose which data you want to import:</p>
                        <div class="import-options">
                            <button id="import-interest-free-btn" class="mdc-button mdc-button--raised form-button">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label">Interest-Free Tracker</span>
                            </button>
                            <button id="import-bill-planner-btn" class="mdc-button mdc-button--raised form-button">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label">Bill Planner</span>
                            </button>
                            <button id="import-both-btn" class="mdc-button mdc-button--raised form-button">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label">Import Both</span>
                            </button>
                        </div>
                    </div>
                    <div class="mdc-dialog__actions">
                        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
                            <span class="mdc-button__ripple"></span>
                            <span class="mdc-button__label">Cancel</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="mdc-dialog__scrim"></div>
        </div>
        
        <div id="export-modal" class="mdc-dialog">
            <div class="mdc-dialog__container">
                <div class="mdc-dialog__surface" role="dialog" aria-modal="true" aria-labelledby="export-dialog-title">
                    <h2 class="mdc-dialog__title" id="export-dialog-title">Export Data</h2>
                    <div class="mdc-dialog__content">
                        <p class="mdc-typography--body1">Choose which data you want to export:</p>
                        <div class="export-options">
                            <button id="export-interest-free-btn" class="mdc-button mdc-button--raised form-button">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label">Interest-Free Tracker</span>
                            </button>
                            <button id="export-bill-planner-btn" class="mdc-button mdc-button--raised form-button">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label">Bill Planner</span>
                            </button>
                            <button id="export-both-btn" class="mdc-button mdc-button--raised form-button">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label">Export Both</span>
                            </button>
                        </div>
                    </div>
                    <div class="mdc-dialog__actions">
                        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
                            <span class="mdc-button__ripple"></span>
                            <span class="mdc-button__label">Cancel</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="mdc-dialog__scrim"></div>
        </div>

        <!-- Notifications -->
        <div id="offlineNotification" class="mdc-snackbar" style="display:none;">
            <div class="mdc-snackbar__surface" role="status" aria-relevant="additions">
                <div class="mdc-snackbar__label" aria-atomic="false">
                    You are currently offline. Changes will be saved locally.
                </div>
                <div class="mdc-snackbar__actions" aria-atomic="true">
                    <button type="button" class="mdc-button mdc-snackbar__action">
                        <span class="mdc-button__label">Dismiss</span>
                    </button>
                </div>
            </div>
        </div>
        
        <div id="snackbar" class="mdc-snackbar">
            <div class="mdc-snackbar__surface" role="status" aria-relevant="additions">
                <div class="mdc-snackbar__label" aria-atomic="false"></div>
                <div class="mdc-snackbar__actions" aria-atomic="true">
                    <button type="button" class="mdc-button mdc-snackbar__action">
                        <span class="mdc-button__label">Dismiss</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Material Components Initialization -->
    <script>
      // Initialize Material Components
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize ripples
        const rippleElements = document.querySelectorAll('.mdc-button, .mdc-icon-button, .mdc-card__primary-action');
        rippleElements.forEach(element => mdc.ripple.MDCRipple.attachTo(element));
        
        // Initialize textfields
        const textFields = document.querySelectorAll('.mdc-text-field');
        textFields.forEach(textField => new mdc.textField.MDCTextField(textField));
        
        // Initialize selects
        const selects = document.querySelectorAll('.mdc-select');
        selects.forEach(select => new mdc.select.MDCSelect(select));
        
        // Initialize tab bar
        const tabBar = document.querySelector('.mdc-tab-bar');
        new mdc.tabBar.MDCTabBar(tabBar);
        
        // Initialize dialogs
        const dialogs = document.querySelectorAll('.mdc-dialog');
        dialogs.forEach(dialog => new mdc.dialog.MDCDialog(dialog));
        
        // Initialize top app bar
        const topAppBar = document.querySelector('.mdc-top-app-bar');
        new mdc.topAppBar.MDCTopAppBar(topAppBar);
        
        // Initialize data tables
        const dataTables = document.querySelectorAll('.mdc-data-table');
        dataTables.forEach(dataTable => new mdc.dataTable.MDCDataTable(dataTable));
        
        // Initialize snackbars
        const snackbars = document.querySelectorAll('.mdc-snackbar');
        snackbars.forEach(snackbar => new mdc.snackbar.MDCSnackbar(snackbar));
      });
    </script>

    <!-- Link to JavaScript files -->
    <script src="./material-app.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./service-worker.js')
            .then(registration => {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            })
            .catch(error => {
              console.log('ServiceWorker registration failed: ', error);
            });
        });
      }
    </script>
</body>
</html>
